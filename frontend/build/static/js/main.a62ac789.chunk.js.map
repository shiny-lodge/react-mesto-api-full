{"version":3,"sources":["images/logo.svg","contexts/CurrentUserContext.js","components/Header.js","components/Card.js","components/Footer.js","components/Main.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/DelCardPopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/Api.js","components/Login.js","components/Register.js","images/error.svg","images/nice.svg","components/InfoTooltip.js","utils/auth.js","components/ProtectedRoute.js","components/App.js","index.js"],"names":["CurrentUserContext","React","createContext","Header","props","currentUser","useContext","className","src","logo","alt","email","to","link","onClick","text","Card","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","type","onDel","onImage","name","onCardLike","length","Footer","Main","onLogOut","style","backgroundImage","avatar","onEditAvatar","onEditProfile","about","onAddPlace","cards","map","onCardDelete","ImagePopup","id","onClose","PopupWithForm","popupId","isOpen","title","formId","onSubmit","method","noValidate","children","buttonText","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","required","placeholder","onChange","target","value","minLength","maxLength","DelCardPopup","onDelCard","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","placeRef","linkRef","onAddCard","place","api","options","this","_headers","headers","_baseUrl","baseUrl","_fetch","values","JSON","stringify","cardId","takeCardLike","removeCardLke","url","body","fetch","Authorization","localStorage","getItem","then","res","ok","json","Promise","reject","status","Login","setEmail","password","setPassword","onInfoTool","Register","InfoTooltip","isSuccess","nice","error","BASE_URL","ProtectedRoute","Component","component","isLoggedIn","App","setUserData","history","useHistory","setCards","isEditAvatarPopupOpen","setEditAvatarClick","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isDelPopupOpen","setDelPopupOpen","selectedCard","setSelectedCard","delCard","setDelCard","isInfoToolOpen","setInfoToolOpen","isRegisterSuccess","setRegisterSuccess","loggedIn","setLoggedIn","getInitialData","all","getInitialCards","getUserData","resp","response","handleDelClick","closeAllPopups","token","Accept","auth","catch","err","console","log","Provider","path","registerData","push","loginData","data","setItem","changeLikeCardStatus","newCard","newCards","c","removeItem","inputText","userData","patchUserData","patchUserAvatar","userCardData","addUserCard","filter","A","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a62ac789.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.fb123762.svg\";","import React from 'react';\n\nconst CurrentUserContext = React.createContext();\nexport default CurrentUserContext;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport logo from '../images/logo.svg';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nfunction Header(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n        <header className=\"header\">\n            <img className=\"header__logo\" src={logo} alt=\"Логотип Место\"/>\n            <div className=\"header__data\">\n            <p className=\"header__email\">{currentUser.email}</p>\n            <Link className=\"header__link\" to={props.link} onClick={props.onClick}>{props.text}</Link></div>\n        </header>);\n}\n\nexport default Header;\n","import React from 'react';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const isOwn = props.card.owner === currentUser._id;\n  const cardDeleteButtonClassName = (\n    `card__del-button ${!isOwn ? 'card__del-button_hidden' : ''}`\n  );\n  const isLiked = props.card.likes.some((i) => i === currentUser._id);\n  const cardLikeButtonClassName = (\n    `card__like-button ${isLiked ? 'card_liked' : ''}`\n  );\n\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  }\n\n  function handelDelClick() {\n    props.onDel(props.card);\n  }\n\n  return (\n        <div key={props.card._id} className=\"card\">\n            <button type=\"button\" className={cardDeleteButtonClassName} onClick={handelDelClick}/>\n            <img className=\"card__img\" onClick={() => {\n              props.onImage(props.card);\n            }} src={props.card.link} alt={props.card.text}/>\n            <div className=\"card__info\">\n                <h3 className=\"card__text\">{props.card.name}</h3>\n                <div className=\"card__like-container\">\n                    <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick}/>\n                    <p className=\"card__like-data\">{props.card.likes.length}</p>\n                </div>\n            </div>\n        </div>\n  );\n}\n\nexport default Card;\n","import React from 'react';\n\nfunction Footer() {\n  return (\n        <footer className=\"footer\">\n            <p className=\"footer__text\">Daniil Lomovitskiy &copy; 2020 Mesto Russia</p>\n        </footer>\n  );\n}\n\nexport default Footer;\n","import React from 'react';\nimport Card from './Card';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport Header from './Header';\nimport Footer from './Footer';\n\nfunction Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <>\n    <Header link={'sign-in'} text={'Выход'} onClick={props.onLogOut} />\n        <main className=\"main\">\n            <section className=\"profile\">\n                <div className=\"profile__first\">\n                    <div className=\"profile__avatar\" style={{ backgroundImage: `url(${currentUser.avatar})` }}>\n                        <button className=\"profile__avatar-edit-button\" onClick={props.onEditAvatar} type=\"button\"/>\n                    </div>\n                    <div className=\"profile__info\">\n                        <h1 className=\"profile__name\">{currentUser.name}</h1>\n                        <button className=\"profile__edit-button\" onClick={props.onEditProfile} type=\"button\"/>\n                        <p className=\"profile__job\">{currentUser.about}</p>\n                    </div>\n                </div>\n                <button type=\"button\" className=\"profile__add-card-button\" onClick={props.onAddPlace}/>\n            </section>\n            <section className=\"photo-grid\">\n                {props.cards.map((card) => (\n                    <Card key={card._id}\n                          card={card}\n                          onDel={props.onCardDelete}\n                          onImage={props.onImage}\n                          onCardLike={props.onCardLike}/>\n                ))}\n\n            </section>\n        </main>\n      <Footer/>\n      </>\n  );\n}\n\nexport default Main;\n","import React from 'react';\n\nfunction ImagePopup(props) {\n  return (\n\n        <div className={`popup ${props.card != null ? 'popup_opened' : ''}`}>\n            <div className=\"popup-photo__container\">\n                <button id=\"photo-close\" type=\"button\" className=\"popup-photo__close-button\" onClick={props.onClose}/>\n                <img className=\"popup-photo__img\" src={props.card != null ? props.card.link : ''}/>\n                <p className=\"popup-photo__text\">{props.card != null ? props.card.name : ''}</p>\n            </div>\n        </div>\n  );\n}\n\nexport default ImagePopup;\n","import React from 'react';\n\nfunction PopupWithForm(props) {\n  return (\n        <div id={props.popupId} className={`popup ${props.isOpen ? 'popup_opened' : ''}`}>\n            <div className=\"popup__container\">\n                <button id=\"name-close\" className=\"popup__close-button\" onClick={props.onClose}/>\n                <div className=\"popup__window\">\n                    <div className=\"popup__window-content\">\n                        <h2 className=\"popup__title\">{props.title}</h2>\n                        <form id={props.formId} onSubmit={props.onSubmit} name=\"profileInfo\" className=\"popup__form\"\n                              method=\"get\" noValidate>\n                            {props.children}\n                            <button type=\"submit\" className=\"popup__save-button\">{props.buttonText}</button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setName] = React.useState(`${currentUser.name}`);\n  const [description, setDescription] = React.useState(`${currentUser.about}`);\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handelSetName(e) {\n    setName(e.target.value);\n  }\n\n  function handelSetDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return (\n        <PopupWithForm onSubmit={handleSubmit} onClose={props.onClose} isOpen={props.isOpen}\n                       title=\"Редактировать профиль\" buttonText=\"Сохранить\"\n                       popupId=\"edit\" formId=\"profile-form\">\n            <input id=\"name\" required placeholder=\"Имя\" type=\"text\" name=\"name\" onChange={handelSetName}\n                   className=\"popup__input\"\n                   minLength=\"2\" maxLength=\"40\" value={name}/>\n            <span id=\"name-error\" className=\"popup__input_error\"/>\n            <input id=\"job\" required placeholder=\"О себе\" type=\"text\" name=\"job\"\n                   className=\"popup__input\" onChange={handelSetDescription}\n                   minLength=\"2\" value={description} maxLength=\"200\"/>\n            <span id=\"job-error\" className=\"popup__input_error\"/>\n        </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction DelCardPopup(props) {\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onDelCard();\n  }\n\n  return (\n        <PopupWithForm onSubmit={handleSubmit} onClose={props.onClose} isOpen={props.isOpen} title=\"Вы уверены?\"\n                       popupId=\"del-popup\" buttonText=\"Да\">\n        </PopupWithForm>\n  );\n}\n\nexport default DelCardPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup(props) {\n  const avatarRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  }\n\n  return (\n        <PopupWithForm onSubmit={handleSubmit} onClose={props.onClose} isOpen={props.isOpen} title=\"Обновить аватар\"\n                       popupId=\"avatar-popup\" formId=\"photo-form\" buttonText=\"Сохранить\">\n            <input ref={avatarRef} id=\"avatar-link\" required placeholder=\"Ссылка на изображение\" type=\"url\"\n                   name=\"link\"\n                   className=\"popup__input\"/>\n            <span id=\"avatar-link-error\" className=\"popup__input_error\"/>\n        </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup(props) {\n  const placeRef = React.useRef();\n  const linkRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onAddCard({\n      place: placeRef.current.value,\n      link: linkRef.current.value,\n    });\n  }\n\n  return (\n        <PopupWithForm onSubmit={handleSubmit} onClose={props.onClose} isOpen={props.isOpen} title=\"Новое место\"\n                       popupId=\"photo-add\"\n                       formId=\"photo-form\">\n            <input ref={placeRef} id=\"place\" required placeholder=\"Название\" type=\"text\" name=\"place\"\n                   className=\"popup__input\"\n                   minLength=\"1\" maxLength=\"30\"/>\n            <span id=\"place-error\" className=\"popup__input_error\"/>\n            <input ref={linkRef} id=\"link\" required placeholder=\"Ссылка на картинку\" type=\"url\" name=\"link\"\n                   className=\"popup__input\"/>\n            <span id=\"link-error\" className=\"popup__input_error\"/>\n            <button type=\"submit\" className=\"popup__save-button\">Создать</button>\n        </PopupWithForm>\n\n  );\n}\n\nexport default AddPlacePopup;\n","class Api {\n  constructor(options) {\n    this._headers = options.headers;\n    this._baseUrl = options.baseUrl;\n  }\n\n  getInitialCards() {\n    return this._fetch('/cards', 'GET');\n  }\n\n  addUserCard(values) {\n    return this._fetch('/cards', 'POST', JSON.stringify({\n      name: values.place,\n      link: values.link,\n    }));\n  }\n\n  takeCardLike(cardId) {\n    return this._fetch(`/cards/${cardId}/likes`, 'PUT');\n  }\n\n  removeCardLke(cardId) {\n    return this._fetch(`/cards/${cardId}/likes`, 'DELETE');\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    if (isLiked) {\n      return this.takeCardLike(cardId);\n    }\n    return this.removeCardLke(cardId);\n  }\n\n  delCard(cardId) {\n    return this._fetch(`/cards/${cardId}`, 'DELETE');\n  }\n\n  getUserData() {\n    return this._fetch('/users/me', 'GET');\n  }\n\n  patchUserData(values) {\n    return this._fetch('/users/me', 'PATCH', JSON.stringify({\n      name: values.name,\n      about: values.about,\n    }));\n  }\n\n  patchUserAvatar(values) {\n    return this._fetch('/users/me/avatar', 'PATCH', JSON.stringify({\n      avatar: values.avatar,\n    }));\n  }\n\n  _fetch(url, method, body) {\n    return fetch(this._baseUrl + url, {\n      method,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem('token')}`,\n        ...this._headers,\n      },\n      body,\n    }).then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n  }\n}\n\nconst api = new Api({\n  baseUrl: '/api',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\nexport default api;\n","import React from 'react';\n\nfunction Login(props) {\n  const [email, setEmail] = React.useState('');\n\n  const [password, setPassword] = React.useState('');\n\n  function handelSetEmail(e) {\n    setEmail(e.target.value);\n  }\n\n  function handelSetPassword(e) {\n    setPassword(e.target.value);\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    props.onInfoTool({\n      email,\n      password,\n    });\n  };\n  return (\n        <div className=\"sign\">\n            <h1 className=\"sign__title\">Вход</h1>\n            <form onSubmit={handleSubmit} name=\"sign-up\" className=\"sign__form\" method=\"get\" noValidate>\n                <input id=\"email\" required placeholder=\"Email\" type=\"text\" name=\"email\"\n                       className=\"sign__input\" onChange={handelSetEmail} value={email}\n                       minLength=\"2\" maxLength=\"40\"/>\n                <input value={password} id=\"password\" required placeholder=\"Пароль\" type=\"password\" name=\"password\"\n                       className=\"sign__input\" onChange={handelSetPassword}\n                       minLength=\"2\" maxLength=\"200\"/>\n                <button type=\"submit\" className=\"sign__save-button\">Войти</button>\n            </form>\n        </div>\n\n  );\n}\n\nexport default Login;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register(props) {\n  const [email, setEmail] = React.useState('');\n\n  const [password, setPassword] = React.useState('');\n\n  function handelSetEmail(e) {\n    setEmail(e.target.value);\n  }\n\n  function handelSetPassword(e) {\n    setPassword(e.target.value);\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    props.onInfoTool({\n      email,\n      password,\n    });\n  };\n\n  return (\n    <div className=\"sign\">\n      <h1 className=\"sign__title\">Регистрация</h1>\n      <form onSubmit={handleSubmit} name=\"sign-up\" className=\"sign__form\" method=\"get\" noValidate>\n        <input id=\"email\" required placeholder=\"Email\" type=\"text\" name=\"email\"\n               className=\"sign__input\" onChange={handelSetEmail}\n               minLength=\"2\" maxLength=\"40\" value={email}/>\n        <input id=\"password\" required placeholder=\"Пароль\" type=\"password\" name=\"password\"\n               className=\"sign__input\" onChange={handelSetPassword}\n               minLength=\"2\" maxLength=\"200\" value={password}/>\n        <button type=\"submit\" className=\"sign__save-button\">Зарегистрироваться</button>\n      </form>\n      <Link to=\"sign-in\" className=\"sign__link\">Уже зарегистрированы? Войти</Link>\n    </div>\n  );\n}\n\nexport default Register;\n","export default __webpack_public_path__ + \"static/media/error.22240a45.svg\";","export default __webpack_public_path__ + \"static/media/nice.9d32fbdc.svg\";","import React from 'react';\nimport error from '../images/error.svg';\nimport nice from '../images/nice.svg';\n\nfunction InfoTooltip(props) {\n  return (\n        <div id={props.popupId} className={`popup ${props.isOpen ? 'popup_opened' : ''}`}>\n            <div className=\"popup__container\">\n                <button id=\"name-close\" className=\"popup__close-button\" onClick={props.onClose}/>\n                <div className=\"popup__window\">\n                    <div className=\"popup__image-content\">\n                        <img className='popup__image' alt={props.isSuccess ? 'Все хорошо' : 'Ошибка'}\n                             src={props.isSuccess ? nice : error}/>\n                        <h2 className=\"popup__image-title\">{props.isSuccess ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}</h2>\n                    </div>\n                </div>\n            </div>\n        </div>\n  );\n}\n\nexport default InfoTooltip;\n","export const BASE_URL = '/api';\n\nexport function register({ email, password }) {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => {\n      if (res.ok) {\n        return res.json();\n      }\n\n      return Promise.reject(`Ошибка: ${res.status}`);\n    });\n}\n\nexport const logIn = ({ email, password }) => fetch(`${BASE_URL}/signin`, {\n  method: 'POST',\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  },\n  body: JSON.stringify({ email, password }),\n})\n  .then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  })\n  .then((data) => {\n    if (data != null) {\n      localStorage.setItem('token', data.token);\n    }\n    return data;\n  });\n\nexport const tokenValid = (token) => fetch(`${BASE_URL}/users/me`, {\n  method: 'GET',\n  headers: {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    Authorization: `Bearer ${token}`,\n  },\n})\n  .then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  });\n","import React from 'react';\nimport { Redirect, Route } from 'react-router-dom';\n\nfunction ProtectedRoute({ component: Component, ...props }) {\n  return (\n        <Route>\n            {\n                () => (props.isLoggedIn ? <><Component {...props}/>{props.children}</> : <Redirect to=\"./sign-in\"/>)\n            }\n        </Route>\n  );\n}\n\nexport default ProtectedRoute;\n","import React from 'react';\nimport {\n  Redirect, Route, Switch, useHistory,\n} from 'react-router-dom';\nimport Header from './Header';\nimport Main from './Main';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport DelCardPopup from './DelCardPopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport api from '../utils/Api';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport Login from './Login';\nimport Register from './Register';\nimport InfoTooltip from './InfoTooltip';\nimport * as auth from '../utils/auth';\nimport ProtectedRoute from './ProtectedRoute';\n\nfunction App() {\n  const [currentUser, setUserData] = React.useState({\n    _id: '',\n    name: '',\n    about: '',\n    avatar: '',\n    email: '',\n  });\n  const history = useHistory();\n\n  const [cards, setCards] = React.useState([]);\n  const [isEditAvatarPopupOpen, setEditAvatarClick] = React.useState(false);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isDelPopupOpen, setDelPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [delCard, setDelCard] = React.useState(null);\n  const [isInfoToolOpen, setInfoToolOpen] = React.useState(false);\n  const [isRegisterSuccess, setRegisterSuccess] = React.useState(true);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n\n  function getInitialData() {\n    setLoggedIn(true);\n    return Promise.all([api.getInitialCards(), api.getUserData()]).then(([resp, response]) => {\n      setUserData({ ...response });\n      setCards(resp);\n    });\n  }\n\n  React.useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token !== null) {\n      auth.tokenValid(token).then((res) => {\n        if (res) {\n          getInitialData().catch((err) => {\n            console.log(err);\n          });\n        } else {\n          setLoggedIn(false);\n        }\n      }).catch((err) => {\n        console.log(err);\n      });\n    }\n  }, []);\n\n  function isPopupOpen() {\n    return isEditAvatarPopupOpen\n      || isEditProfilePopupOpen\n      || isAddPlacePopupOpen\n      || isDelPopupOpen\n      || selectedCard != null;\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleDelClick(card) {\n    setDelCard(card);\n    setDelPopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setEditAvatarClick(true);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setAddPlacePopupOpen(false);\n    setEditAvatarClick(false);\n    setEditProfilePopupOpen(false);\n    setDelPopupOpen(false);\n    setSelectedCard(null);\n    setDelCard(null);\n    setInfoToolOpen(false);\n  }\n\n  function handleUpdateUser(userData) {\n    api.patchUserData(userData).then((res) => {\n      setUserData(res);\n      closeAllPopups();\n    }).catch((err) => {\n      console.log(err);\n    });\n  }\n\n  function handleUpdateAvatar(userData) {\n    api.patchUserAvatar(userData).then((res) => {\n      setUserData(res);\n      closeAllPopups();\n    }).catch((err) => {\n      console.log(err);\n    });\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n      const newCards = cards.map((c) => (c._id === card._id ? newCard : c));\n      setCards(newCards);\n    }).catch((err) => {\n      console.log(err);\n    });\n  }\n\n  function handleCardDelete() {\n    api.delCard(delCard._id).then(() => {\n      const newCards = cards.filter((c) => c._id !== delCard._id);\n      setCards(newCards);\n      closeAllPopups();\n    }).catch((err) => {\n      console.log(err);\n    });\n  }\n\n  function handleAddPlaceSubmit(userCardData) {\n    api.addUserCard(userCardData).then((newCard) => {\n      setCards([newCard, ...cards]);\n      closeAllPopups();\n    }).catch((err) => {\n      console.log(err);\n    });\n  }\n\n  function handleRegister(registerData) {\n    auth.register(registerData).then((res) => {\n      if (res !== null) {\n        setRegisterSuccess(true);\n        setInfoToolOpen(true);\n        history.push('/sign-in');\n      }\n    }).catch((err) => {\n      console.log(err);\n      setRegisterSuccess(false);\n      setInfoToolOpen(true);\n    });\n  }\n\n  function handleLogin(loginData) {\n    auth.logIn(loginData).then((res) => {\n      if (res !== null) {\n        getInitialData().catch((err) => {\n          console.log(err);\n        });\n      }\n    }).catch((err) => {\n      console.log(err);\n      setRegisterSuccess(false);\n      setInfoToolOpen(true);\n    });\n  }\n\n  function handleLogOut() {\n    localStorage.removeItem('token');\n    setLoggedIn(false);\n    currentUser.email = null;\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n\n      <Switch>\n        <Route path={'/sign-up'}>\n          {loggedIn ? <Redirect to=\"./\"/> : <><Header link={'sign-in'} text={'Войти'}/>\n            <Register onInfoTool={handleRegister}/></>}\n        </Route>\n\n        <Route path={'/sign-in'}>\n          {loggedIn ? <Redirect to=\"./\"/> : <><Header link={'sign-up'} text={'Регистрация'}/>\n            <Login onInfoTool={handleLogin}/></>}\n\n        </Route>\n\n        <ProtectedRoute component={Main} cards={cards}\n                        onCardLike={handleCardLike}\n                        onCardDelete={handleDelClick}\n                        onEditProfile={handleEditProfileClick}\n                        onAddPlace={handleAddPlaceClick}\n                        onEditAvatar={handleEditAvatarClick}\n                        onDel={handleDelClick}\n                        onImage={handleCardClick}\n                        onLogOut={handleLogOut}\n                        isLoggedIn={loggedIn} path={'/'}>\n\n          <EditProfilePopup inputText={currentUser}\n                            onUpdateUser={handleUpdateUser}\n                            isOpen={isEditProfilePopupOpen}\n                            onClose={closeAllPopups}/>\n\n          <EditAvatarPopup onUpdateAvatar={handleUpdateAvatar}\n                           isOpen={isEditAvatarPopupOpen}\n                           onClose={closeAllPopups}/>\n\n          <AddPlacePopup onAddCard={handleAddPlaceSubmit}\n                         isOpen={isAddPlacePopupOpen}\n                         onClose={closeAllPopups}/>\n          <DelCardPopup onDelCard={handleCardDelete}\n                        isOpen={isDelPopupOpen} A\n                        onClose={closeAllPopups}/>\n\n          <ImagePopup onClose={closeAllPopups} card={selectedCard}/>\n\n          <div className={`overlay ${isPopupOpen() ? 'popup_opened' : ''}`}/>\n        </ProtectedRoute>\n      </Switch>\n      <InfoTooltip isSuccess={isRegisterSuccess} isOpen={isInfoToolOpen} onClose={closeAllPopups}/>\n\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './components/App';\n\nReactDOM.render(\n    <React.StrictMode>\n        <BrowserRouter>\n            <App/>\n        </BrowserRouter>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}